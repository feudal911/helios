name: Deploy to GitHub Pages

on:
  push:
    branches: [ main ]
  workflow_dispatch:

permissions:
  contents: read
  pages: write
  id-token: write

concurrency:
  group: "pages"
  cancel-in-progress: false

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3
      
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
      
      - name: Setup Pages
        uses: actions/configure-pages@v3
      
      - name: Build static site
        run: |
          mkdir -p docs
          # Criar página de documentação estática
          cat > docs/index.html << 'EOF'
          <!DOCTYPE html>
          <html lang="pt-BR">
          <head>
              <meta charset="UTF-8">
              <meta name="viewport" content="width=device-width, initial-scale=1.0">
              <title>HELIOS - Sistema de Monitoramento de Fazendas Solares</title>
              <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
              <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
              <style>
                  :root {
                      --bg-dark: #1a1a1a;
                      --bg-darker: #0f0f0f;
                      --bg-card: #252525;
                      --text-primary: #e8e8e0;
                      --text-secondary: #a8a8a0;
                      --primary: #4a9eff;
                      --success: #4ade80;
                      --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.5);
                  }
                  body {
                      background: var(--bg-dark);
                      color: var(--text-primary);
                      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
                  }
                  .hero {
                      background: linear-gradient(135deg, var(--bg-darker) 0%, var(--bg-dark) 100%);
                      padding: 4rem 0;
                      min-height: 60vh;
                      display: flex;
                      align-items: center;
                  }
                  .card {
                      background: var(--bg-card);
                      border: 1px solid rgba(232, 232, 224, 0.1);
                      color: var(--text-primary);
                  }
                  .btn-primary {
                      background: var(--primary);
                      border: none;
                  }
                  .btn-primary:hover {
                      background: #5aa8ff;
                  }
              </style>
          </head>
          <body>
              <nav class="navbar navbar-dark bg-dark">
                  <div class="container">
                      <a class="navbar-brand" href="#">
                          <i class="bi bi-sun-fill"></i> HELIOS
                      </a>
                  </div>
              </nav>
              
              <div class="hero">
                  <div class="container text-center">
                      <h1 class="display-4 mb-4">HELIOS</h1>
                      <p class="lead mb-4">Sistema de Monitoramento e Manutenção Preditiva de Fazendas Solares</p>
                      <div class="row mt-5">
                          <div class="col-md-4 mb-4">
                              <div class="card p-4">
                                  <i class="bi bi-lightning-charge fs-1 text-primary mb-3"></i>
                                  <h5>Monitoramento em Tempo Real</h5>
                                  <p>Acompanhamento de geração de energia, eficiência e status das placas solares</p>
                              </div>
                          </div>
                          <div class="col-md-4 mb-4">
                              <div class="card p-4">
                                  <i class="bi bi-graph-up fs-1 text-success mb-3"></i>
                                  <h5>Dashboard Interativo</h5>
                                  <p>Visualizações e gráficos dinâmicos com filtros avançados</p>
                              </div>
                          </div>
                          <div class="col-md-4 mb-4">
                              <div class="card p-4">
                                  <i class="bi bi-shield-check fs-1 text-warning mb-3"></i>
                                  <h5>Manutenção Preditiva</h5>
                                  <p>Alertas inteligentes para manutenção preventiva</p>
                              </div>
                          </div>
                      </div>
                      <div class="mt-5">
                          <a href="https://github.com/feudal911/helios" class="btn btn-primary btn-lg me-3">
                              <i class="bi bi-github"></i> Ver no GitHub
                          </a>
                          <a href="https://github.com/feudal911/helios/blob/main/README.md" class="btn btn-outline-light btn-lg">
                              <i class="bi bi-book"></i> Documentação
                          </a>
                      </div>
                  </div>
              </div>
              
              <div class="container py-5">
                  <div class="row">
                      <div class="col-md-6">
                          <h3><i class="bi bi-gear"></i> Tecnologias</h3>
                          <ul class="list-unstyled">
                              <li><i class="bi bi-check-circle text-success"></i> Python 3.11</li>
                              <li><i class="bi bi-check-circle text-success"></i> Flask</li>
                              <li><i class="bi bi-check-circle text-success"></i> MySQL</li>
                              <li><i class="bi bi-check-circle text-success"></i> SQLAlchemy</li>
                              <li><i class="bi bi-check-circle text-success"></i> Chart.js</li>
                              <li><i class="bi bi-check-circle text-success"></i> Leaflet.js</li>
                          </ul>
                      </div>
                      <div class="col-md-6">
                          <h3><i class="bi bi-rocket"></i> Como Usar</h3>
                          <ol>
                              <li>Clone o repositório</li>
                              <li>Instale as dependências: <code>pip install -r requirements.txt</code></li>
                              <li>Configure o banco de dados MySQL</li>
                              <li>Execute: <code>python app.py</code></li>
                          </ol>
                          <p class="mt-3">
                              <a href="https://github.com/feudal911/helios/blob/main/README.md" class="btn btn-outline-primary">
                                  Ver Instruções Completas
                              </a>
                          </p>
                      </div>
                  </div>
              </div>
              
              <footer class="bg-dark py-4 mt-5">
                  <div class="container text-center">
                      <p>&copy; 2025 HELIOS</p>
                  </div>
              </footer>
          </body>
          </html>
          EOF
          echo "Static site built"
      
      - name: Upload artifact
        uses: actions/upload-pages-artifact@v2
        with:
          path: docs

  deploy:
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    runs-on: ubuntu-latest
    needs: build
    steps:
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v2

